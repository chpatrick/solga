<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Data.Acquire.Internal</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Data-Acquire-Internal.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">resourcet-1.1.7.4: Deterministic allocation and freeing of scarce resources.</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>Trustworthy</td></tr><tr><th>Language</th><td>Haskell98</td></tr></table><p class="caption">Data.Acquire.Internal</p></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">newtype</span> <a href="#t:Acquire">Acquire</a> a = <a href="#v:Acquire">Acquire</a> ((<span class="keyword">forall</span> b. <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> b -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> b) -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> (<a href="Data-Acquire-Internal.html#t:Allocated">Allocated</a> a))</li><li class="src short"><span class="keyword">data</span> <a href="#t:Allocated">Allocated</a> a = <a href="#v:Allocated">Allocated</a> !a !(<a href="Data-Acquire-Internal.html#t:ReleaseType">ReleaseType</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> ())</li><li class="src short"><a href="#v:with">with</a> :: <a href="Control-Monad-Trans-Resource.html#t:MonadBaseControl">MonadBaseControl</a> <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> m =&gt; <a href="Data-Acquire-Internal.html#t:Acquire">Acquire</a> a -&gt; (a -&gt; m b) -&gt; m b</li><li class="src short"><a href="#v:withEx">withEx</a> :: (<a href="../exceptions-0.8.2.1/Control-Monad-Catch.html#t:MonadMask">MonadMask</a> m, <a href="../transformers-0.4.2.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m) =&gt; <a href="Data-Acquire-Internal.html#t:Acquire">Acquire</a> a -&gt; (a -&gt; m b) -&gt; m b</li><li class="src short"><a href="#v:mkAcquire">mkAcquire</a> :: <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> a -&gt; (a -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> ()) -&gt; <a href="Data-Acquire-Internal.html#t:Acquire">Acquire</a> a</li><li class="src short"><span class="keyword">data</span> <a href="#t:ReleaseType">ReleaseType</a><ul class="subs"><li>= <a href="#v:ReleaseEarly">ReleaseEarly</a></li><li>| <a href="#v:ReleaseNormal">ReleaseNormal</a></li><li>| <a href="#v:ReleaseException">ReleaseException</a></li></ul></li><li class="src short"><a href="#v:mkAcquireType">mkAcquireType</a> :: <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> a -&gt; (a -&gt; <a href="Data-Acquire-Internal.html#t:ReleaseType">ReleaseType</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> ()) -&gt; <a href="Data-Acquire-Internal.html#t:Acquire">Acquire</a> a</li></ul></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">newtype</span> <a name="t:Acquire" class="def">Acquire</a> a</p><div class="doc"><p>A method for acquiring a scarce resource, providing the means of freeing
 it when no longer needed. This data type provides
 <code>Functor</code><em><code>Applicative</code></em><code>Monad</code> instances for composing different resources
 together. You can allocate these resources using either the <code>bracket</code>
 pattern (via <code>with</code>) or using <code>ResourceT</code> (via <code>allocateAcquire</code>).</p><p>This concept was originally introduced by Gabriel Gonzalez and described at:
 <a href="http://www.haskellforall.com/2013/06/the-resource-applicative.html">http://www.haskellforall.com/2013/06/the-resource-applicative.html</a>. The
 implementation in this package is slightly different, due to taking a
 different approach to async exception safety.</p><p>Since 1.1.0</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:Acquire" class="def">Acquire</a> ((<span class="keyword">forall</span> b. <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> b -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> b) -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> (<a href="Data-Acquire-Internal.html#t:Allocated">Allocated</a> a))</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:Acquire" class="caption collapser" onclick="toggleSection('i:Acquire')">Instances</p><div id="section.i:Acquire" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.2.0/Control-Monad.html#t:Monad">Monad</a> <a href="Data-Acquire-Internal.html#t:Acquire">Acquire</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.2.0/Data-Functor.html#t:Functor">Functor</a> <a href="Data-Acquire-Internal.html#t:Acquire">Acquire</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.2.0/Control-Applicative.html#t:Applicative">Applicative</a> <a href="Data-Acquire-Internal.html#t:Acquire">Acquire</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="../transformers-0.4.2.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> <a href="Data-Acquire-Internal.html#t:Acquire">Acquire</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="../transformers-base-0.4.4/Control-Monad-Base.html#t:MonadBase">MonadBase</a> <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> <a href="Data-Acquire-Internal.html#t:Acquire">Acquire</a></span></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:Allocated" class="def">Allocated</a> a</p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:Allocated" class="def">Allocated</a> !a !(<a href="Data-Acquire-Internal.html#t:ReleaseType">ReleaseType</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> ())</td><td class="doc empty">&nbsp;</td></tr></table></div></div><div class="top"><p class="src"><a name="v:with" class="def">with</a> :: <a href="Control-Monad-Trans-Resource.html#t:MonadBaseControl">MonadBaseControl</a> <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> m =&gt; <a href="Data-Acquire-Internal.html#t:Acquire">Acquire</a> a -&gt; (a -&gt; m b) -&gt; m b</p><div class="doc"><p>Allocate the given resource and provide it to the provided function. The
 resource will be freed as soon as the inner block is exited, whether
 normally or via an exception. This function is similar in function to
 <code>bracket</code>.</p><p>Since 1.1.0</p></div></div><div class="top"><p class="src"><a name="v:withEx" class="def">withEx</a> :: (<a href="../exceptions-0.8.2.1/Control-Monad-Catch.html#t:MonadMask">MonadMask</a> m, <a href="../transformers-0.4.2.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m) =&gt; <a href="Data-Acquire-Internal.html#t:Acquire">Acquire</a> a -&gt; (a -&gt; m b) -&gt; m b</p><div class="doc"><p>Same as <code>with</code>, but uses the <code>MonadMask</code> typeclass from exceptions instead
 of <code>MonadBaseControl</code> from exceptions.</p><p>Since 1.1.3</p></div></div><div class="top"><p class="src"><a name="v:mkAcquire" class="def">mkAcquire</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> a</td><td class="doc"><p>acquire the resource</p></td></tr><tr><td class="src">-&gt; (a -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> ())</td><td class="doc"><p>free the resource</p></td></tr><tr><td class="src">-&gt; <a href="Data-Acquire-Internal.html#t:Acquire">Acquire</a> a</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Create an <code>Acquire</code> value using the given allocate and free functions.</p><p>Since 1.1.0</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:ReleaseType" class="def">ReleaseType</a></p><div class="doc"><p>The way in which a release is called.</p><p>Since 1.1.2</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:ReleaseEarly" class="def">ReleaseEarly</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a name="v:ReleaseNormal" class="def">ReleaseNormal</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a name="v:ReleaseException" class="def">ReleaseException</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:ReleaseType" class="caption collapser" onclick="toggleSection('i:ReleaseType')">Instances</p><div id="section.i:ReleaseType" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.2.0/Prelude.html#t:Bounded">Bounded</a> <a href="Data-Acquire-Internal.html#t:ReleaseType">ReleaseType</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.2.0/Prelude.html#t:Enum">Enum</a> <a href="Data-Acquire-Internal.html#t:ReleaseType">ReleaseType</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.2.0/Data-Eq.html#t:Eq">Eq</a> <a href="Data-Acquire-Internal.html#t:ReleaseType">ReleaseType</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.2.0/Data-Ord.html#t:Ord">Ord</a> <a href="Data-Acquire-Internal.html#t:ReleaseType">ReleaseType</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.2.0/Text-Read.html#t:Read">Read</a> <a href="Data-Acquire-Internal.html#t:ReleaseType">ReleaseType</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.2.0/Text-Show.html#t:Show">Show</a> <a href="Data-Acquire-Internal.html#t:ReleaseType">ReleaseType</a></span></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><a name="v:mkAcquireType" class="def">mkAcquireType</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> a</td><td class="doc"><p>acquire the resource</p></td></tr><tr><td class="src">-&gt; (a -&gt; <a href="Data-Acquire-Internal.html#t:ReleaseType">ReleaseType</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> ())</td><td class="doc"><p>free the resource</p></td></tr><tr><td class="src">-&gt; <a href="Data-Acquire-Internal.html#t:Acquire">Acquire</a> a</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Same as <code><a href="Data-Acquire-Internal.html#v:mkAcquire">mkAcquire</a></code>, but the cleanup function will be informed of <em>how</em>
 cleanup was initiated. This allows you to distinguish, for example, between
 normal and exceptional exits.</p><p>Since 1.1.2</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.16.1</p></div></body></html>