<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Data.Streaming.Process</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Data-Streaming-Process.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">streaming-commons-0.1.15.5: Common lower-level functions needed by various streaming data libraries</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>Safe</td></tr><tr><th>Language</th><td>Haskell98</td></tr></table><p class="caption">Data.Streaming.Process</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Functions</a></li><li><a href="#g:2">Specialized streaming types</a></li><li><a href="#g:3">Process handle</a></li><li><a href="#g:4">Type classes</a></li><li><a href="#g:5">Checked processes</a></li><li><a href="#g:6">Reexport</a></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>A full tutorial for this module is available on FP School of Haskell:
 <a href="https://www.fpcomplete.com/user/snoyberg/library-documentation/data-conduit-process">https://www.fpcomplete.com/user/snoyberg/library-documentation/data-conduit-process</a>.</p><p>Note that, while the tutorial covers <code>Data.Streaming.Process</code>, this module is
 the basis of the streaming version, and almost all concepts there apply here.</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><a href="#v:streamingProcess">streamingProcess</a> :: (<a href="../transformers-0.4.2.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m, <a href="Data-Streaming-Process.html#t:InputSource">InputSource</a> stdin, <a href="Data-Streaming-Process.html#t:OutputSink">OutputSink</a> stdout, <a href="Data-Streaming-Process.html#t:OutputSink">OutputSink</a> stderr) =&gt; <a href="../process-1.2.3.0/System-Process.html#t:CreateProcess">CreateProcess</a> -&gt; m (stdin, stdout, stderr, <a href="Data-Streaming-Process.html#t:StreamingProcessHandle">StreamingProcessHandle</a>)</li><li class="src short"><span class="keyword">data</span> <a href="#t:Inherited">Inherited</a> = <a href="#v:Inherited">Inherited</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:ClosedStream">ClosedStream</a> = <a href="#v:ClosedStream">ClosedStream</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:UseProvidedHandle">UseProvidedHandle</a> = <a href="#v:UseProvidedHandle">UseProvidedHandle</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:StreamingProcessHandle">StreamingProcessHandle</a></li><li class="src short"><a href="#v:waitForStreamingProcess">waitForStreamingProcess</a> :: <a href="../transformers-0.4.2.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m =&gt; <a href="Data-Streaming-Process.html#t:StreamingProcessHandle">StreamingProcessHandle</a> -&gt; m <a href="../base-4.8.2.0/System-Exit.html#t:ExitCode">ExitCode</a></li><li class="src short"><a href="#v:waitForStreamingProcessSTM">waitForStreamingProcessSTM</a> :: <a href="Data-Streaming-Process.html#t:StreamingProcessHandle">StreamingProcessHandle</a> -&gt; <a href="../base-4.8.2.0/GHC-Conc.html#t:STM">STM</a> <a href="../base-4.8.2.0/System-Exit.html#t:ExitCode">ExitCode</a></li><li class="src short"><a href="#v:getStreamingProcessExitCode">getStreamingProcessExitCode</a> :: <a href="../transformers-0.4.2.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m =&gt; <a href="Data-Streaming-Process.html#t:StreamingProcessHandle">StreamingProcessHandle</a> -&gt; m (<a href="../base-4.8.2.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="../base-4.8.2.0/System-Exit.html#t:ExitCode">ExitCode</a>)</li><li class="src short"><a href="#v:getStreamingProcessExitCodeSTM">getStreamingProcessExitCodeSTM</a> :: <a href="Data-Streaming-Process.html#t:StreamingProcessHandle">StreamingProcessHandle</a> -&gt; <a href="../base-4.8.2.0/GHC-Conc.html#t:STM">STM</a> (<a href="../base-4.8.2.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="../base-4.8.2.0/System-Exit.html#t:ExitCode">ExitCode</a>)</li><li class="src short"><a href="#v:streamingProcessHandleRaw">streamingProcessHandleRaw</a> :: <a href="Data-Streaming-Process.html#t:StreamingProcessHandle">StreamingProcessHandle</a> -&gt; <a href="../process-1.2.3.0/System-Process.html#t:ProcessHandle">ProcessHandle</a></li><li class="src short"><a href="#v:streamingProcessHandleTMVar">streamingProcessHandleTMVar</a> :: <a href="Data-Streaming-Process.html#t:StreamingProcessHandle">StreamingProcessHandle</a> -&gt; <a href="../stm-2.4.4.1/Control-Concurrent-STM-TMVar.html#t:TMVar">TMVar</a> <a href="../base-4.8.2.0/System-Exit.html#t:ExitCode">ExitCode</a></li><li class="src short"><span class="keyword">class</span> <a href="#t:InputSource">InputSource</a> a</li><li class="src short"><span class="keyword">class</span> <a href="#t:OutputSink">OutputSink</a> a</li><li class="src short"><a href="#v:withCheckedProcess">withCheckedProcess</a> :: (<a href="Data-Streaming-Process.html#t:InputSource">InputSource</a> stdin, <a href="Data-Streaming-Process.html#t:OutputSink">OutputSink</a> stderr, <a href="Data-Streaming-Process.html#t:OutputSink">OutputSink</a> stdout, <a href="../transformers-0.4.2.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m) =&gt; <a href="../process-1.2.3.0/System-Process.html#t:CreateProcess">CreateProcess</a> -&gt; (stdin -&gt; stdout -&gt; stderr -&gt; m b) -&gt; m b</li><li class="src short"><span class="keyword">data</span> <a href="#t:ProcessExitedUnsuccessfully">ProcessExitedUnsuccessfully</a> = <a href="#v:ProcessExitedUnsuccessfully">ProcessExitedUnsuccessfully</a> <a href="../process-1.2.3.0/System-Process.html#t:CreateProcess">CreateProcess</a> <a href="../base-4.8.2.0/System-Exit.html#t:ExitCode">ExitCode</a></li><li class="src short">module <a href="../process-1.2.3.0/System-Process.html">System.Process</a></li></ul></div><div id="interface"><h1 id="g:1">Functions</h1><div class="top"><p class="src"><a name="v:streamingProcess" class="def">streamingProcess</a> :: (<a href="../transformers-0.4.2.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m, <a href="Data-Streaming-Process.html#t:InputSource">InputSource</a> stdin, <a href="Data-Streaming-Process.html#t:OutputSink">OutputSink</a> stdout, <a href="Data-Streaming-Process.html#t:OutputSink">OutputSink</a> stderr) =&gt; <a href="../process-1.2.3.0/System-Process.html#t:CreateProcess">CreateProcess</a> -&gt; m (stdin, stdout, stderr, <a href="Data-Streaming-Process.html#t:StreamingProcessHandle">StreamingProcessHandle</a>)</p><div class="doc"><p>The primary function for running a process. Note that, with the
 exception of <code><a href="Data-Streaming-Process.html#t:UseProvidedHandle">UseProvidedHandle</a></code>, the values for <code>std_in</code>, <code>std_out</code>
 and <code>std_err</code> will be ignored by this function.</p><p>Since 0.1.4</p></div></div><h1 id="g:2">Specialized streaming types</h1><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:Inherited" class="def">Inherited</a></p><div class="doc"><p>Inherit the stream from the current process.</p><p>Since 0.1.4</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:Inherited" class="def">Inherited</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:Inherited" class="caption collapser" onclick="toggleSection('i:Inherited')">Instances</p><div id="section.i:Inherited" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><a href="Data-Streaming-Process.html#t:OutputSink">OutputSink</a> <a href="Data-Streaming-Process.html#t:Inherited">Inherited</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Data-Streaming-Process.html#t:InputSource">InputSource</a> <a href="Data-Streaming-Process.html#t:Inherited">Inherited</a></span></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:ClosedStream" class="def">ClosedStream</a></p><div class="doc"><p>Close the stream with the child process.</p><p>Since 0.1.4</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:ClosedStream" class="def">ClosedStream</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:ClosedStream" class="caption collapser" onclick="toggleSection('i:ClosedStream')">Instances</p><div id="section.i:ClosedStream" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><a href="Data-Streaming-Process.html#t:OutputSink">OutputSink</a> <a href="Data-Streaming-Process.html#t:ClosedStream">ClosedStream</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Data-Streaming-Process.html#t:InputSource">InputSource</a> <a href="Data-Streaming-Process.html#t:ClosedStream">ClosedStream</a></span></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:UseProvidedHandle" class="def">UseProvidedHandle</a></p><div class="doc"><p>Use the <code>Handle</code> provided by the <code>CreateProcess</code> value. This would allow
 you, for example, to open up a <code>Handle</code> to a file, set it as <code>std_out</code>, and
 avoid any additional overhead of dealing with providing that data to your
 process.</p><p>Since 0.1.4</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:UseProvidedHandle" class="def">UseProvidedHandle</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:UseProvidedHandle" class="caption collapser" onclick="toggleSection('i:UseProvidedHandle')">Instances</p><div id="section.i:UseProvidedHandle" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><a href="Data-Streaming-Process.html#t:OutputSink">OutputSink</a> <a href="Data-Streaming-Process.html#t:UseProvidedHandle">UseProvidedHandle</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Data-Streaming-Process.html#t:InputSource">InputSource</a> <a href="Data-Streaming-Process.html#t:UseProvidedHandle">UseProvidedHandle</a></span></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><h1 id="g:3">Process handle</h1><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:StreamingProcessHandle" class="def">StreamingProcessHandle</a></p><div class="doc"><p>Wraps up the standard <code>ProcessHandle</code> to avoid the <code>waitForProcess</code>
 deadlock. See the linked documentation from the module header for more
 information.</p><p>Since 0.1.4</p></div></div><div class="top"><p class="src"><a name="v:waitForStreamingProcess" class="def">waitForStreamingProcess</a> :: <a href="../transformers-0.4.2.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m =&gt; <a href="Data-Streaming-Process.html#t:StreamingProcessHandle">StreamingProcessHandle</a> -&gt; m <a href="../base-4.8.2.0/System-Exit.html#t:ExitCode">ExitCode</a></p><div class="doc"><p>Blocking call to wait for a process to exit.</p><p>Since 0.1.4</p></div></div><div class="top"><p class="src"><a name="v:waitForStreamingProcessSTM" class="def">waitForStreamingProcessSTM</a> :: <a href="Data-Streaming-Process.html#t:StreamingProcessHandle">StreamingProcessHandle</a> -&gt; <a href="../base-4.8.2.0/GHC-Conc.html#t:STM">STM</a> <a href="../base-4.8.2.0/System-Exit.html#t:ExitCode">ExitCode</a></p><div class="doc"><p>STM version of <code>waitForStreamingProcess</code>.</p><p>Since 0.1.4</p></div></div><div class="top"><p class="src"><a name="v:getStreamingProcessExitCode" class="def">getStreamingProcessExitCode</a> :: <a href="../transformers-0.4.2.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m =&gt; <a href="Data-Streaming-Process.html#t:StreamingProcessHandle">StreamingProcessHandle</a> -&gt; m (<a href="../base-4.8.2.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="../base-4.8.2.0/System-Exit.html#t:ExitCode">ExitCode</a>)</p><div class="doc"><p>Non-blocking call to check for a process exit code.</p><p>Since 0.1.4</p></div></div><div class="top"><p class="src"><a name="v:getStreamingProcessExitCodeSTM" class="def">getStreamingProcessExitCodeSTM</a> :: <a href="Data-Streaming-Process.html#t:StreamingProcessHandle">StreamingProcessHandle</a> -&gt; <a href="../base-4.8.2.0/GHC-Conc.html#t:STM">STM</a> (<a href="../base-4.8.2.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="../base-4.8.2.0/System-Exit.html#t:ExitCode">ExitCode</a>)</p><div class="doc"><p>STM version of <code>getStreamingProcessExitCode</code>.</p><p>Since 0.1.4</p></div></div><div class="top"><p class="src"><a name="v:streamingProcessHandleRaw" class="def">streamingProcessHandleRaw</a> :: <a href="Data-Streaming-Process.html#t:StreamingProcessHandle">StreamingProcessHandle</a> -&gt; <a href="../process-1.2.3.0/System-Process.html#t:ProcessHandle">ProcessHandle</a></p><div class="doc"><p>Get the raw <code>ProcessHandle</code> from a <code>StreamingProcessHandle</code>. Note that
 you should avoid using this to get the process exit code, and instead
 use the provided functions.</p><p>Since 0.1.4</p></div></div><div class="top"><p class="src"><a name="v:streamingProcessHandleTMVar" class="def">streamingProcessHandleTMVar</a> :: <a href="Data-Streaming-Process.html#t:StreamingProcessHandle">StreamingProcessHandle</a> -&gt; <a href="../stm-2.4.4.1/Control-Concurrent-STM-TMVar.html#t:TMVar">TMVar</a> <a href="../base-4.8.2.0/System-Exit.html#t:ExitCode">ExitCode</a></p><div class="doc"><p>Get the <code>TMVar</code> storing the process exit code. In general, one of the
 above functions should be used instead to avoid accidentally corrupting the variable's state..</p><p>Since 0.1.4</p></div></div><h1 id="g:4">Type classes</h1><div class="top"><p class="src"><span class="keyword">class</span> <a name="t:InputSource" class="def">InputSource</a> a</p><div class="doc"><p>Class for all things which can be used to provide standard input.</p><p>Since 0.1.4</p></div><div class="subs minimal"><p class="caption">Minimal complete definition</p><p class="src"><a href="Data-Streaming-Process-Internal.html#v:isStdStream">isStdStream</a></p></div><div class="subs instances"><p id="control.i:InputSource" class="caption collapser" onclick="toggleSection('i:InputSource')">Instances</p><div id="section.i:InputSource" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><a href="Data-Streaming-Process.html#t:InputSource">InputSource</a> <a href="../base-4.8.2.0/GHC-IO-Handle.html#t:Handle">Handle</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Data-Streaming-Process.html#t:InputSource">InputSource</a> <a href="Data-Streaming-Process.html#t:ClosedStream">ClosedStream</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Data-Streaming-Process.html#t:InputSource">InputSource</a> <a href="Data-Streaming-Process.html#t:Inherited">Inherited</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Data-Streaming-Process.html#t:InputSource">InputSource</a> <a href="Data-Streaming-Process.html#t:UseProvidedHandle">UseProvidedHandle</a></span></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">class</span> <a name="t:OutputSink" class="def">OutputSink</a> a</p><div class="doc"><p>Class for all things which can be used to consume standard output or
 error.</p><p>Since 0.1.4</p></div><div class="subs minimal"><p class="caption">Minimal complete definition</p><p class="src"><a href="Data-Streaming-Process-Internal.html#v:osStdStream">osStdStream</a></p></div><div class="subs instances"><p id="control.i:OutputSink" class="caption collapser" onclick="toggleSection('i:OutputSink')">Instances</p><div id="section.i:OutputSink" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><a href="Data-Streaming-Process.html#t:OutputSink">OutputSink</a> <a href="../base-4.8.2.0/GHC-IO-Handle.html#t:Handle">Handle</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Data-Streaming-Process.html#t:OutputSink">OutputSink</a> <a href="Data-Streaming-Process.html#t:ClosedStream">ClosedStream</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Data-Streaming-Process.html#t:OutputSink">OutputSink</a> <a href="Data-Streaming-Process.html#t:Inherited">Inherited</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Data-Streaming-Process.html#t:OutputSink">OutputSink</a> <a href="Data-Streaming-Process.html#t:UseProvidedHandle">UseProvidedHandle</a></span></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><h1 id="g:5">Checked processes</h1><div class="top"><p class="src"><a name="v:withCheckedProcess" class="def">withCheckedProcess</a> :: (<a href="Data-Streaming-Process.html#t:InputSource">InputSource</a> stdin, <a href="Data-Streaming-Process.html#t:OutputSink">OutputSink</a> stderr, <a href="Data-Streaming-Process.html#t:OutputSink">OutputSink</a> stdout, <a href="../transformers-0.4.2.0/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m) =&gt; <a href="../process-1.2.3.0/System-Process.html#t:CreateProcess">CreateProcess</a> -&gt; (stdin -&gt; stdout -&gt; stderr -&gt; m b) -&gt; m b</p><div class="doc"><p>Run a process and supply its streams to the given callback function. After
 the callback completes, wait for the process to complete and check its exit
 code. If the exit code is not a success, throw a
 <code><a href="Data-Streaming-Process.html#t:ProcessExitedUnsuccessfully">ProcessExitedUnsuccessfully</a></code>.</p><p>NOTE: This function does not kill the child process in the event of an
 exception from the provided function. For that, please use
 <code>withCheckedProcessCleanup</code> from the <code>conduit-extra</code> package.</p><p>Since 0.1.7</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:ProcessExitedUnsuccessfully" class="def">ProcessExitedUnsuccessfully</a></p><div class="doc"><p>Indicates that a process exited with an non-success exit code.</p><p>Since 0.1.7</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:ProcessExitedUnsuccessfully" class="def">ProcessExitedUnsuccessfully</a> <a href="../process-1.2.3.0/System-Process.html#t:CreateProcess">CreateProcess</a> <a href="../base-4.8.2.0/System-Exit.html#t:ExitCode">ExitCode</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:ProcessExitedUnsuccessfully" class="caption collapser" onclick="toggleSection('i:ProcessExitedUnsuccessfully')">Instances</p><div id="section.i:ProcessExitedUnsuccessfully" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.2.0/Text-Show.html#t:Show">Show</a> <a href="Data-Streaming-Process.html#t:ProcessExitedUnsuccessfully">ProcessExitedUnsuccessfully</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.2.0/Control-Exception-Base.html#t:Exception">Exception</a> <a href="Data-Streaming-Process.html#t:ProcessExitedUnsuccessfully">ProcessExitedUnsuccessfully</a></span></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><h1 id="g:6">Reexport</h1><div class="top"><p class="src">module <a href="../process-1.2.3.0/System-Process.html">System.Process</a></p></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.16.1</p></div></body></html>