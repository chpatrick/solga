<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Network.Wai.Internal</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Network-Wai-Internal.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">wai-3.2.1.1: Web Application Interface.</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell98</td></tr></table><p class="caption">Network.Wai.Internal</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Internal constructors and helper functions. Note that no guarantees are
 given for stability of these interfaces.</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">data</span> <a href="#t:Request">Request</a> = <a href="#v:Request">Request</a> {<ul class="subs"><li><a href="#v:requestMethod">requestMethod</a> :: <a href="../http-types-0.9/Network-HTTP-Types-Method.html#t:Method">Method</a></li><li><a href="#v:httpVersion">httpVersion</a> :: <a href="../http-types-0.9/Network-HTTP-Types-Version.html#t:HttpVersion">HttpVersion</a></li><li><a href="#v:rawPathInfo">rawPathInfo</a> :: <a href="../bytestring-0.10.6.0/Data-ByteString.html#t:ByteString">ByteString</a></li><li><a href="#v:rawQueryString">rawQueryString</a> :: <a href="../bytestring-0.10.6.0/Data-ByteString.html#t:ByteString">ByteString</a></li><li><a href="#v:requestHeaders">requestHeaders</a> :: <a href="../http-types-0.9/Network-HTTP-Types-Header.html#t:RequestHeaders">RequestHeaders</a></li><li><a href="#v:isSecure">isSecure</a> :: <a href="../base-4.8.2.0/Data-Bool.html#t:Bool">Bool</a></li><li><a href="#v:remoteHost">remoteHost</a> :: <a href="../network-2.6.2.1/Network-Socket-Internal.html#t:SockAddr">SockAddr</a></li><li><a href="#v:pathInfo">pathInfo</a> :: [<a href="../text-1.2.2.1/Data-Text.html#t:Text">Text</a>]</li><li><a href="#v:queryString">queryString</a> :: <a href="../http-types-0.9/Network-HTTP-Types-URI.html#t:Query">Query</a></li><li><a href="#v:requestBody">requestBody</a> :: <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> <a href="../bytestring-0.10.6.0/Data-ByteString.html#t:ByteString">ByteString</a></li><li><a href="#v:vault">vault</a> :: <a href="../vault-0.3.0.6/Data-Vault-Lazy.html#t:Vault">Vault</a></li><li><a href="#v:requestBodyLength">requestBodyLength</a> :: <a href="Network-Wai-Internal.html#t:RequestBodyLength">RequestBodyLength</a></li><li><a href="#v:requestHeaderHost">requestHeaderHost</a> :: <a href="../base-4.8.2.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="../bytestring-0.10.6.0/Data-ByteString.html#t:ByteString">ByteString</a></li><li><a href="#v:requestHeaderRange">requestHeaderRange</a> :: <a href="../base-4.8.2.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="../bytestring-0.10.6.0/Data-ByteString.html#t:ByteString">ByteString</a></li><li><a href="#v:requestHeaderReferer">requestHeaderReferer</a> :: <a href="../base-4.8.2.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="../bytestring-0.10.6.0/Data-ByteString.html#t:ByteString">ByteString</a></li><li><a href="#v:requestHeaderUserAgent">requestHeaderUserAgent</a> :: <a href="../base-4.8.2.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="../bytestring-0.10.6.0/Data-ByteString.html#t:ByteString">ByteString</a></li></ul>}</li><li class="src short"><span class="keyword">data</span> <a href="#t:Response">Response</a><ul class="subs"><li>= <a href="#v:ResponseFile">ResponseFile</a> <a href="../http-types-0.9/Network-HTTP-Types-Status.html#t:Status">Status</a> <a href="../http-types-0.9/Network-HTTP-Types-Header.html#t:ResponseHeaders">ResponseHeaders</a> <a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a> (<a href="../base-4.8.2.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Network-Wai-Internal.html#t:FilePart">FilePart</a>)</li><li>| <a href="#v:ResponseBuilder">ResponseBuilder</a> <a href="../http-types-0.9/Network-HTTP-Types-Status.html#t:Status">Status</a> <a href="../http-types-0.9/Network-HTTP-Types-Header.html#t:ResponseHeaders">ResponseHeaders</a> <a href="../blaze-builder-0.4.0.2/Blaze-ByteString-Builder.html#t:Builder">Builder</a></li><li>| <a href="#v:ResponseStream">ResponseStream</a> <a href="../http-types-0.9/Network-HTTP-Types-Status.html#t:Status">Status</a> <a href="../http-types-0.9/Network-HTTP-Types-Header.html#t:ResponseHeaders">ResponseHeaders</a> <a href="Network-Wai-Internal.html#t:StreamingBody">StreamingBody</a></li><li>| <a href="#v:ResponseRaw">ResponseRaw</a> (<a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> <a href="../bytestring-0.10.6.0/Data-ByteString.html#t:ByteString">ByteString</a> -&gt; (<a href="../bytestring-0.10.6.0/Data-ByteString.html#t:ByteString">ByteString</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> ()) -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> ()) <a href="Network-Wai-Internal.html#t:Response">Response</a></li></ul></li><li class="src short"><span class="keyword">type</span> <a href="#t:StreamingBody">StreamingBody</a> = (<a href="../blaze-builder-0.4.0.2/Blaze-ByteString-Builder.html#t:Builder">Builder</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> ()) -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> () -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> ()</li><li class="src short"><span class="keyword">data</span> <a href="#t:RequestBodyLength">RequestBodyLength</a><ul class="subs"><li>= <a href="#v:ChunkedBody">ChunkedBody</a></li><li>| <a href="#v:KnownLength">KnownLength</a> <a href="../base-4.8.2.0/Data-Word.html#t:Word64">Word64</a></li></ul></li><li class="src short"><span class="keyword">data</span> <a href="#t:FilePart">FilePart</a> = <a href="#v:FilePart">FilePart</a> {<ul class="subs"><li><a href="#v:filePartOffset">filePartOffset</a> :: <a href="../base-4.8.2.0/Prelude.html#t:Integer">Integer</a></li><li><a href="#v:filePartByteCount">filePartByteCount</a> :: <a href="../base-4.8.2.0/Prelude.html#t:Integer">Integer</a></li><li><a href="#v:filePartFileSize">filePartFileSize</a> :: <a href="../base-4.8.2.0/Prelude.html#t:Integer">Integer</a></li></ul>}</li><li class="src short"><span class="keyword">data</span> <a href="#t:ResponseReceived">ResponseReceived</a> = <a href="#v:ResponseReceived">ResponseReceived</a></li></ul></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:Request" class="def">Request</a></p><div class="doc"><p>Information on the request sent by the client. This abstracts away the
 details of the underlying implementation.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:Request" class="def">Request</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><dl><dt class="src"><a name="v:requestMethod" class="def">requestMethod</a> :: <a href="../http-types-0.9/Network-HTTP-Types-Method.html#t:Method">Method</a></dt><dd class="doc"><p>Request method such as GET.</p></dd><dt class="src"><a name="v:httpVersion" class="def">httpVersion</a> :: <a href="../http-types-0.9/Network-HTTP-Types-Version.html#t:HttpVersion">HttpVersion</a></dt><dd class="doc"><p>HTTP version such as 1.1.</p></dd><dt class="src"><a name="v:rawPathInfo" class="def">rawPathInfo</a> :: <a href="../bytestring-0.10.6.0/Data-ByteString.html#t:ByteString">ByteString</a></dt><dd class="doc"><p>Extra path information sent by the client. The meaning varies slightly
 depending on backend; in a standalone server setting, this is most likely
 all information after the domain name. In a CGI application, this would be
 the information following the path to the CGI executable itself.</p><p>Middlewares and routing tools should not modify this raw value, as it may
 be used for such things as creating redirect destinations by applications.
 Instead, if you are writing a middleware or routing framework, modify the
 <code>pathInfo</code> instead. This is the approach taken by systems like Yesod
 subsites.</p><p><em>Note</em>: At the time of writing this documentation, there is at least one
 system (<code>Network.Wai.UrlMap</code> from <code>wai-extra</code>) that does not follow the
 above recommendation. Therefore, it is recommended that you test the
 behavior of your application when using <code>rawPathInfo</code> and any form of
 library that might modify the <code>Request</code>.</p></dd><dt class="src"><a name="v:rawQueryString" class="def">rawQueryString</a> :: <a href="../bytestring-0.10.6.0/Data-ByteString.html#t:ByteString">ByteString</a></dt><dd class="doc"><p>If no query string was specified, this should be empty. This value
 <em>will</em> include the leading question mark.
 Do not modify this raw value - modify queryString instead.</p></dd><dt class="src"><a name="v:requestHeaders" class="def">requestHeaders</a> :: <a href="../http-types-0.9/Network-HTTP-Types-Header.html#t:RequestHeaders">RequestHeaders</a></dt><dd class="doc"><p>A list of headers (a pair of key and value) in an HTTP request.</p></dd><dt class="src"><a name="v:isSecure" class="def">isSecure</a> :: <a href="../base-4.8.2.0/Data-Bool.html#t:Bool">Bool</a></dt><dd class="doc"><p>Was this request made over an SSL connection?</p><p>Note that this value will <em>not</em> tell you if the client originally made
 this request over SSL, but rather whether the current connection is SSL.
 The distinction lies with reverse proxies. In many cases, the client will
 connect to a load balancer over SSL, but connect to the WAI handler
 without SSL. In such a case, <code><a href="Network-Wai-Internal.html#v:isSecure">isSecure</a></code> will be <code><a href="../base-4.8.2.0/Data-Bool.html#v:False">False</a></code>, but from a user
 perspective, there is a secure connection.</p></dd><dt class="src"><a name="v:remoteHost" class="def">remoteHost</a> :: <a href="../network-2.6.2.1/Network-Socket-Internal.html#t:SockAddr">SockAddr</a></dt><dd class="doc"><p>The client's host information.</p></dd><dt class="src"><a name="v:pathInfo" class="def">pathInfo</a> :: [<a href="../text-1.2.2.1/Data-Text.html#t:Text">Text</a>]</dt><dd class="doc"><p>Path info in individual pieces - the URL without a hostname/port and
 without a query string, split on forward slashes.</p></dd><dt class="src"><a name="v:queryString" class="def">queryString</a> :: <a href="../http-types-0.9/Network-HTTP-Types-URI.html#t:Query">Query</a></dt><dd class="doc"><p>Parsed query string information.</p></dd><dt class="src"><a name="v:requestBody" class="def">requestBody</a> :: <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> <a href="../bytestring-0.10.6.0/Data-ByteString.html#t:ByteString">ByteString</a></dt><dd class="doc"><p>Get the next chunk of the body. Returns <code><a href="../bytestring-0.10.6.0/Data-ByteString.html#v:empty">empty</a></code> when the
 body is fully consumed.</p></dd><dt class="src"><a name="v:vault" class="def">vault</a> :: <a href="../vault-0.3.0.6/Data-Vault-Lazy.html#t:Vault">Vault</a></dt><dd class="doc"><p>A location for arbitrary data to be shared by applications and middleware.</p></dd><dt class="src"><a name="v:requestBodyLength" class="def">requestBodyLength</a> :: <a href="Network-Wai-Internal.html#t:RequestBodyLength">RequestBodyLength</a></dt><dd class="doc"><p>The size of the request body. In the case of a chunked request body,
 this may be unknown.</p><p>Since 1.4.0</p></dd><dt class="src"><a name="v:requestHeaderHost" class="def">requestHeaderHost</a> :: <a href="../base-4.8.2.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="../bytestring-0.10.6.0/Data-ByteString.html#t:ByteString">ByteString</a></dt><dd class="doc"><p>The value of the Host header in a HTTP request.</p><p>Since 2.0.0</p></dd><dt class="src"><a name="v:requestHeaderRange" class="def">requestHeaderRange</a> :: <a href="../base-4.8.2.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="../bytestring-0.10.6.0/Data-ByteString.html#t:ByteString">ByteString</a></dt><dd class="doc"><p>The value of the Range header in a HTTP request.</p><p>Since 2.0.0</p></dd><dt class="src"><a name="v:requestHeaderReferer" class="def">requestHeaderReferer</a> :: <a href="../base-4.8.2.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="../bytestring-0.10.6.0/Data-ByteString.html#t:ByteString">ByteString</a></dt><dd class="doc"><p>The value of the Referer header in a HTTP request.</p><p>Since 3.2.0</p></dd><dt class="src"><a name="v:requestHeaderUserAgent" class="def">requestHeaderUserAgent</a> :: <a href="../base-4.8.2.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="../bytestring-0.10.6.0/Data-ByteString.html#t:ByteString">ByteString</a></dt><dd class="doc"><p>The value of the User-Agent header in a HTTP request.</p><p>Since 3.2.0</p></dd></dl><div class="clear"></div></div></td></tr></table></div><div class="subs instances"><p id="control.i:Request" class="caption collapser" onclick="toggleSection('i:Request')">Instances</p><div id="section.i:Request" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.2.0/Text-Show.html#t:Show">Show</a> <a href="Network-Wai-Internal.html#t:Request">Request</a></span></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:Response" class="def">Response</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:ResponseFile" class="def">ResponseFile</a> <a href="../http-types-0.9/Network-HTTP-Types-Status.html#t:Status">Status</a> <a href="../http-types-0.9/Network-HTTP-Types-Header.html#t:ResponseHeaders">ResponseHeaders</a> <a href="../base-4.8.2.0/System-IO.html#t:FilePath">FilePath</a> (<a href="../base-4.8.2.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Network-Wai-Internal.html#t:FilePart">FilePart</a>)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a name="v:ResponseBuilder" class="def">ResponseBuilder</a> <a href="../http-types-0.9/Network-HTTP-Types-Status.html#t:Status">Status</a> <a href="../http-types-0.9/Network-HTTP-Types-Header.html#t:ResponseHeaders">ResponseHeaders</a> <a href="../blaze-builder-0.4.0.2/Blaze-ByteString-Builder.html#t:Builder">Builder</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a name="v:ResponseStream" class="def">ResponseStream</a> <a href="../http-types-0.9/Network-HTTP-Types-Status.html#t:Status">Status</a> <a href="../http-types-0.9/Network-HTTP-Types-Header.html#t:ResponseHeaders">ResponseHeaders</a> <a href="Network-Wai-Internal.html#t:StreamingBody">StreamingBody</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a name="v:ResponseRaw" class="def">ResponseRaw</a> (<a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> <a href="../bytestring-0.10.6.0/Data-ByteString.html#t:ByteString">ByteString</a> -&gt; (<a href="../bytestring-0.10.6.0/Data-ByteString.html#t:ByteString">ByteString</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> ()) -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> ()) <a href="Network-Wai-Internal.html#t:Response">Response</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:StreamingBody" class="def">StreamingBody</a> = (<a href="../blaze-builder-0.4.0.2/Blaze-ByteString-Builder.html#t:Builder">Builder</a> -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> ()) -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> () -&gt; <a href="../base-4.8.2.0/System-IO.html#t:IO">IO</a> ()</p><div class="doc"><p>Represents a streaming HTTP response body. It's a function of two
 parameters; the first parameter provides a means of sending another chunk of
 data, and the second parameter provides a means of flushing the data to the
 client.</p><p>Since 3.0.0</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:RequestBodyLength" class="def">RequestBodyLength</a></p><div class="doc"><p>The size of the request body. In the case of chunked bodies, the size will
 not be known.</p><p>Since 1.4.0</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:ChunkedBody" class="def">ChunkedBody</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a name="v:KnownLength" class="def">KnownLength</a> <a href="../base-4.8.2.0/Data-Word.html#t:Word64">Word64</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:RequestBodyLength" class="caption collapser" onclick="toggleSection('i:RequestBodyLength')">Instances</p><div id="section.i:RequestBodyLength" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.2.0/Text-Show.html#t:Show">Show</a> <a href="Network-Wai-Internal.html#t:RequestBodyLength">RequestBodyLength</a></span></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:FilePart" class="def">FilePart</a></p><div class="doc"><p>Information on which part to be sent.
   Sophisticated application handles Range (and If-Range) then
   create <code><a href="Network-Wai-Internal.html#t:FilePart">FilePart</a></code>.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:FilePart" class="def">FilePart</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><dl><dt class="src"><a name="v:filePartOffset" class="def">filePartOffset</a> :: <a href="../base-4.8.2.0/Prelude.html#t:Integer">Integer</a></dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:filePartByteCount" class="def">filePartByteCount</a> :: <a href="../base-4.8.2.0/Prelude.html#t:Integer">Integer</a></dt><dd class="doc empty">&nbsp;</dd><dt class="src"><a name="v:filePartFileSize" class="def">filePartFileSize</a> :: <a href="../base-4.8.2.0/Prelude.html#t:Integer">Integer</a></dt><dd class="doc empty">&nbsp;</dd></dl><div class="clear"></div></div></td></tr></table></div><div class="subs instances"><p id="control.i:FilePart" class="caption collapser" onclick="toggleSection('i:FilePart')">Instances</p><div id="section.i:FilePart" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.2.0/Text-Show.html#t:Show">Show</a> <a href="Network-Wai-Internal.html#t:FilePart">FilePart</a></span></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:ResponseReceived" class="def">ResponseReceived</a></p><div class="doc"><p>A special datatype to indicate that the WAI handler has received the
 response. This is to avoid the need for Rank2Types in the definition of
 Application.</p><p>It is <em>highly</em> advised that only WAI handlers import and use the data
 constructor for this data type.</p><p>Since 3.0.0</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:ResponseReceived" class="def">ResponseReceived</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.16.1</p></div></body></html>