<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Data.Primitive.Array</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Data-Primitive-Array.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">primitive-0.6.1.0: Primitive memory-related operations</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Copyright</th><td>(c) Roman Leshchinskiy 2009-2012</td></tr><tr><th>License</th><td>BSD-style</td></tr><tr><th>Maintainer</th><td>Roman Leshchinskiy &lt;rl@cse.unsw.edu.au&gt;</td></tr><tr><th>Portability</th><td>non-portable</td></tr><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Data.Primitive.Array</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Primitive boxed arrays</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">data</span> <a href="#t:Array">Array</a> a = <a href="#v:Array">Array</a> (<a href="../ghc-prim-0.4.0.0/GHC-Prim.html#t:Array-35-">Array#</a> a)</li><li class="src short"><span class="keyword">data</span> <a href="#t:MutableArray">MutableArray</a> s a = <a href="#v:MutableArray">MutableArray</a> (<a href="../ghc-prim-0.4.0.0/GHC-Prim.html#t:MutableArray-35-">MutableArray#</a> s a)</li><li class="src short"><a href="#v:newArray">newArray</a> :: <a href="Control-Monad-Primitive.html#t:PrimMonad">PrimMonad</a> m =&gt; <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a> -&gt; a -&gt; m (<a href="Data-Primitive-Array.html#t:MutableArray">MutableArray</a> (<a href="Control-Monad-Primitive.html#t:PrimState">PrimState</a> m) a)</li><li class="src short"><a href="#v:readArray">readArray</a> :: <a href="Control-Monad-Primitive.html#t:PrimMonad">PrimMonad</a> m =&gt; <a href="Data-Primitive-Array.html#t:MutableArray">MutableArray</a> (<a href="Control-Monad-Primitive.html#t:PrimState">PrimState</a> m) a -&gt; <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a> -&gt; m a</li><li class="src short"><a href="#v:writeArray">writeArray</a> :: <a href="Control-Monad-Primitive.html#t:PrimMonad">PrimMonad</a> m =&gt; <a href="Data-Primitive-Array.html#t:MutableArray">MutableArray</a> (<a href="Control-Monad-Primitive.html#t:PrimState">PrimState</a> m) a -&gt; <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a> -&gt; a -&gt; m ()</li><li class="src short"><a href="#v:indexArray">indexArray</a> :: <a href="Data-Primitive-Array.html#t:Array">Array</a> a -&gt; <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a> -&gt; a</li><li class="src short"><a href="#v:indexArrayM">indexArrayM</a> :: <a href="../base-4.8.2.0/Control-Monad.html#t:Monad">Monad</a> m =&gt; <a href="Data-Primitive-Array.html#t:Array">Array</a> a -&gt; <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a> -&gt; m a</li><li class="src short"><a href="#v:unsafeFreezeArray">unsafeFreezeArray</a> :: <a href="Control-Monad-Primitive.html#t:PrimMonad">PrimMonad</a> m =&gt; <a href="Data-Primitive-Array.html#t:MutableArray">MutableArray</a> (<a href="Control-Monad-Primitive.html#t:PrimState">PrimState</a> m) a -&gt; m (<a href="Data-Primitive-Array.html#t:Array">Array</a> a)</li><li class="src short"><a href="#v:unsafeThawArray">unsafeThawArray</a> :: <a href="Control-Monad-Primitive.html#t:PrimMonad">PrimMonad</a> m =&gt; <a href="Data-Primitive-Array.html#t:Array">Array</a> a -&gt; m (<a href="Data-Primitive-Array.html#t:MutableArray">MutableArray</a> (<a href="Control-Monad-Primitive.html#t:PrimState">PrimState</a> m) a)</li><li class="src short"><a href="#v:sameMutableArray">sameMutableArray</a> :: <a href="Data-Primitive-Array.html#t:MutableArray">MutableArray</a> s a -&gt; <a href="Data-Primitive-Array.html#t:MutableArray">MutableArray</a> s a -&gt; <a href="../base-4.8.2.0/Data-Bool.html#t:Bool">Bool</a></li><li class="src short"><a href="#v:copyArray">copyArray</a> :: <a href="Control-Monad-Primitive.html#t:PrimMonad">PrimMonad</a> m =&gt; <a href="Data-Primitive-Array.html#t:MutableArray">MutableArray</a> (<a href="Control-Monad-Primitive.html#t:PrimState">PrimState</a> m) a -&gt; <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="Data-Primitive-Array.html#t:Array">Array</a> a -&gt; <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a> -&gt; m ()</li><li class="src short"><a href="#v:copyMutableArray">copyMutableArray</a> :: <a href="Control-Monad-Primitive.html#t:PrimMonad">PrimMonad</a> m =&gt; <a href="Data-Primitive-Array.html#t:MutableArray">MutableArray</a> (<a href="Control-Monad-Primitive.html#t:PrimState">PrimState</a> m) a -&gt; <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="Data-Primitive-Array.html#t:MutableArray">MutableArray</a> (<a href="Control-Monad-Primitive.html#t:PrimState">PrimState</a> m) a -&gt; <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a> -&gt; m ()</li><li class="src short"><a href="#v:cloneArray">cloneArray</a> :: <a href="Data-Primitive-Array.html#t:Array">Array</a> a -&gt; <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="Data-Primitive-Array.html#t:Array">Array</a> a</li><li class="src short"><a href="#v:cloneMutableArray">cloneMutableArray</a> :: <a href="Control-Monad-Primitive.html#t:PrimMonad">PrimMonad</a> m =&gt; <a href="Data-Primitive-Array.html#t:MutableArray">MutableArray</a> (<a href="Control-Monad-Primitive.html#t:PrimState">PrimState</a> m) a -&gt; <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a> -&gt; m (<a href="Data-Primitive-Array.html#t:MutableArray">MutableArray</a> (<a href="Control-Monad-Primitive.html#t:PrimState">PrimState</a> m) a)</li></ul></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:Array" class="def">Array</a> a</p><div class="doc"><p>Boxed arrays</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:Array" class="def">Array</a> (<a href="../ghc-prim-0.4.0.0/GHC-Prim.html#t:Array-35-">Array#</a> a)</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:Array" class="caption collapser" onclick="toggleSection('i:Array')">Instances</p><div id="section.i:Array" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.2.0/Data-Typeable-Internal.html#t:Typeable">Typeable</a> * a =&gt; <a href="../base-4.8.2.0/Data-Data.html#t:Data">Data</a> (<a href="Data-Primitive-Array.html#t:Array">Array</a> a)</span></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:MutableArray" class="def">MutableArray</a> s a</p><div class="doc"><p>Mutable boxed arrays associated with a primitive state token.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:MutableArray" class="def">MutableArray</a> (<a href="../ghc-prim-0.4.0.0/GHC-Prim.html#t:MutableArray-35-">MutableArray#</a> s a)</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:MutableArray" class="caption collapser" onclick="toggleSection('i:MutableArray')">Instances</p><div id="section.i:MutableArray" class="show"><table><tr><td class="src clearfix"><span class="inst-left">(<a href="../base-4.8.2.0/Data-Typeable-Internal.html#t:Typeable">Typeable</a> * s, <a href="../base-4.8.2.0/Data-Typeable-Internal.html#t:Typeable">Typeable</a> * a) =&gt; <a href="../base-4.8.2.0/Data-Data.html#t:Data">Data</a> (<a href="Data-Primitive-Array.html#t:MutableArray">MutableArray</a> s a)</span></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><a name="v:newArray" class="def">newArray</a> :: <a href="Control-Monad-Primitive.html#t:PrimMonad">PrimMonad</a> m =&gt; <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a> -&gt; a -&gt; m (<a href="Data-Primitive-Array.html#t:MutableArray">MutableArray</a> (<a href="Control-Monad-Primitive.html#t:PrimState">PrimState</a> m) a)</p><div class="doc"><p>Create a new mutable array of the specified size and initialise all
 elements with the given value.</p></div></div><div class="top"><p class="src"><a name="v:readArray" class="def">readArray</a> :: <a href="Control-Monad-Primitive.html#t:PrimMonad">PrimMonad</a> m =&gt; <a href="Data-Primitive-Array.html#t:MutableArray">MutableArray</a> (<a href="Control-Monad-Primitive.html#t:PrimState">PrimState</a> m) a -&gt; <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a> -&gt; m a</p><div class="doc"><p>Read a value from the array at the given index.</p></div></div><div class="top"><p class="src"><a name="v:writeArray" class="def">writeArray</a> :: <a href="Control-Monad-Primitive.html#t:PrimMonad">PrimMonad</a> m =&gt; <a href="Data-Primitive-Array.html#t:MutableArray">MutableArray</a> (<a href="Control-Monad-Primitive.html#t:PrimState">PrimState</a> m) a -&gt; <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a> -&gt; a -&gt; m ()</p><div class="doc"><p>Write a value to the array at the given index.</p></div></div><div class="top"><p class="src"><a name="v:indexArray" class="def">indexArray</a> :: <a href="Data-Primitive-Array.html#t:Array">Array</a> a -&gt; <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a> -&gt; a</p><div class="doc"><p>Read a value from the immutable array at the given index.</p></div></div><div class="top"><p class="src"><a name="v:indexArrayM" class="def">indexArrayM</a> :: <a href="../base-4.8.2.0/Control-Monad.html#t:Monad">Monad</a> m =&gt; <a href="Data-Primitive-Array.html#t:Array">Array</a> a -&gt; <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a> -&gt; m a</p><div class="doc"><p>Monadically read a value from the immutable array at the given index.
 This allows us to be strict in the array while remaining lazy in the read
 element which is very useful for collective operations. Suppose we want to
 copy an array. We could do something like this:</p><pre>copy marr arr ... = do ...
                       writeArray marr i (indexArray arr i) ...
                       ...</pre><p>But since primitive arrays are lazy, the calls to <code><a href="Data-Primitive-Array.html#v:indexArray">indexArray</a></code> will not be
 evaluated. Rather, <code>marr</code> will be filled with thunks each of which would
 retain a reference to <code>arr</code>. This is definitely not what we want!</p><p>With <code><a href="Data-Primitive-Array.html#v:indexArrayM">indexArrayM</a></code>, we can instead write</p><pre>copy marr arr ... = do ...
                       x &lt;- indexArrayM arr i
                       writeArray marr i x
                       ...</pre><p>Now, indexing is executed immediately although the returned element is
 still not evaluated.</p></div></div><div class="top"><p class="src"><a name="v:unsafeFreezeArray" class="def">unsafeFreezeArray</a> :: <a href="Control-Monad-Primitive.html#t:PrimMonad">PrimMonad</a> m =&gt; <a href="Data-Primitive-Array.html#t:MutableArray">MutableArray</a> (<a href="Control-Monad-Primitive.html#t:PrimState">PrimState</a> m) a -&gt; m (<a href="Data-Primitive-Array.html#t:Array">Array</a> a)</p><div class="doc"><p>Convert a mutable array to an immutable one without copying. The
 array should not be modified after the conversion.</p></div></div><div class="top"><p class="src"><a name="v:unsafeThawArray" class="def">unsafeThawArray</a> :: <a href="Control-Monad-Primitive.html#t:PrimMonad">PrimMonad</a> m =&gt; <a href="Data-Primitive-Array.html#t:Array">Array</a> a -&gt; m (<a href="Data-Primitive-Array.html#t:MutableArray">MutableArray</a> (<a href="Control-Monad-Primitive.html#t:PrimState">PrimState</a> m) a)</p><div class="doc"><p>Convert an immutable array to an mutable one without copying. The
 immutable array should not be used after the conversion.</p></div></div><div class="top"><p class="src"><a name="v:sameMutableArray" class="def">sameMutableArray</a> :: <a href="Data-Primitive-Array.html#t:MutableArray">MutableArray</a> s a -&gt; <a href="Data-Primitive-Array.html#t:MutableArray">MutableArray</a> s a -&gt; <a href="../base-4.8.2.0/Data-Bool.html#t:Bool">Bool</a></p><div class="doc"><p>Check whether the two arrays refer to the same memory block.</p></div></div><div class="top"><p class="src"><a name="v:copyArray" class="def">copyArray</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="Control-Monad-Primitive.html#t:PrimMonad">PrimMonad</a> m</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; <a href="Data-Primitive-Array.html#t:MutableArray">MutableArray</a> (<a href="Control-Monad-Primitive.html#t:PrimState">PrimState</a> m) a</td><td class="doc"><p>destination array</p></td></tr><tr><td class="src">-&gt; <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a></td><td class="doc"><p>offset into destination array</p></td></tr><tr><td class="src">-&gt; <a href="Data-Primitive-Array.html#t:Array">Array</a> a</td><td class="doc"><p>source array</p></td></tr><tr><td class="src">-&gt; <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a></td><td class="doc"><p>offset into source array</p></td></tr><tr><td class="src">-&gt; <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a></td><td class="doc"><p>number of elements to copy</p></td></tr><tr><td class="src">-&gt; m ()</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Copy a slice of an immutable array to a mutable array.</p></div></div><div class="top"><p class="src"><a name="v:copyMutableArray" class="def">copyMutableArray</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="Control-Monad-Primitive.html#t:PrimMonad">PrimMonad</a> m</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; <a href="Data-Primitive-Array.html#t:MutableArray">MutableArray</a> (<a href="Control-Monad-Primitive.html#t:PrimState">PrimState</a> m) a</td><td class="doc"><p>destination array</p></td></tr><tr><td class="src">-&gt; <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a></td><td class="doc"><p>offset into destination array</p></td></tr><tr><td class="src">-&gt; <a href="Data-Primitive-Array.html#t:MutableArray">MutableArray</a> (<a href="Control-Monad-Primitive.html#t:PrimState">PrimState</a> m) a</td><td class="doc"><p>source array</p></td></tr><tr><td class="src">-&gt; <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a></td><td class="doc"><p>offset into source array</p></td></tr><tr><td class="src">-&gt; <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a></td><td class="doc"><p>number of elements to copy</p></td></tr><tr><td class="src">-&gt; m ()</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Copy a slice of a mutable array to another array. The two arrays may
 not be the same.</p></div></div><div class="top"><p class="src"><a name="v:cloneArray" class="def">cloneArray</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="Data-Primitive-Array.html#t:Array">Array</a> a</td><td class="doc"><p>source array</p></td></tr><tr><td class="src">-&gt; <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a></td><td class="doc"><p>offset into destination array</p></td></tr><tr><td class="src">-&gt; <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a></td><td class="doc"><p>number of elements to copy</p></td></tr><tr><td class="src">-&gt; <a href="Data-Primitive-Array.html#t:Array">Array</a> a</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Return a newly allocated Array with the specified subrange of the
 provided Array. The provided Array should contain the full subrange
 specified by the two Ints, but this is not checked.</p></div></div><div class="top"><p class="src"><a name="v:cloneMutableArray" class="def">cloneMutableArray</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="Control-Monad-Primitive.html#t:PrimMonad">PrimMonad</a> m</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">=&gt; <a href="Data-Primitive-Array.html#t:MutableArray">MutableArray</a> (<a href="Control-Monad-Primitive.html#t:PrimState">PrimState</a> m) a</td><td class="doc"><p>source array</p></td></tr><tr><td class="src">-&gt; <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a></td><td class="doc"><p>offset into destination array</p></td></tr><tr><td class="src">-&gt; <a href="../base-4.8.2.0/Data-Int.html#t:Int">Int</a></td><td class="doc"><p>number of elements to copy</p></td></tr><tr><td class="src">-&gt; m (<a href="Data-Primitive-Array.html#t:MutableArray">MutableArray</a> (<a href="Control-Monad-Primitive.html#t:PrimState">PrimState</a> m) a)</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Return a newly allocated MutableArray. with the specified subrange of
 the provided MutableArray. The provided MutableArray should contain the
 full subrange specified by the two Ints, but this is not checked.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.16.1</p></div></body></html>